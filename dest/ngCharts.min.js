/*! ng-charts 1.0.0 */
angular.module("ng-charts",[]).constant("ng-charts.defaults",{scaleFontFamily:"'Arial'",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",scaleOverlay:!1,xFilters:"number:0",yFilters:"number:0",onAnimationComplete:null,animationEasing:"easeOutQuart",animation:!0,animationSteps:70,zeroXAxis:!0,zeroYAxis:!0,xScaleLimits:{min:null,max:null},yScaleLimits:{min:null,max:null}}),angular.module("ng-charts").factory("ng-charts.utils",["$filter",function(a){"use strict";function b(a){return!isNaN(parseFloat(a))&&isFinite(a)}var c={},d={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-a*(a-2)},easeInOutQuad:function(a){return(a*=2)<1?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a*=2)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a*=2)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a*=2)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-0.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0===a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1===a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0===a?0:1==a?1:(a*=2)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==a?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(1*a-b)*Math.PI/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2==(a*=2)?1:(c||(c=.3*1.5),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(a-b)*Math.PI/c)*.5+1)},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a*=2)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-d.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:function(a){return.5>a?.5*d.easeInBounce(2*a):.5*d.easeOutBounce(2*a-1)+.5}};c.getColor=function(a,b,c){var d=["#23b5e4","#51e2d1","#fe7e7b","#fabf00"],e=1;return e=1===c?b:a,e<d.length?d[e]:d[d.length%e-1]},c.setCanvasSize=function(a,b,c){if(a.width=b,a.height=c,window.devicePixelRatio){var d=window.devicePixelRatio;a.style.width=b+"px",a.style.height=c+"px",a.height*=d,a.width*=d,a.getContext("2d").scale(d,d)}},c.getValueBounds=function(a){var b,c,d=Number.MIN_VALUE,e=Number.MAX_VALUE,f={};for(b=0;b<a.length;b++)for(c=0;c<a[b].y.length;c++)a[b].y[c]>d&&(d=a[b].y[c]),a[b].y[c]<e&&(e=a[b].y[c]);if(f.maxY=d,f.minY=e,"undefined"!=typeof a[0].x){for(d=Number.MIN_VALUE,e=Number.MAX_VALUE,b=0;b<a.length;b++)for(c=0;c<a[b].x.length;c++)a[b].x[c]>d&&(d=a[b].x[c]),a[b].x[c]<e&&(e=a[b].x[c]);f.maxX=d,f.minX=e}return f},c.calculateScale=function(a,b,c,d,e){var f,g,h,i;if(a=e.max?e.max:a,e.min)b=e.min;else if(d)b=0;else if(i=a-b,0!==i){g=Math.floor(Math.log(i)/Math.LN10);var j=Math.floor(Math.log(b)/Math.LN10);b=Math.floor(b/Math.pow(10,j-g-1))*Math.pow(10,j-g-1)}if(i=a-b,0===i)g=Math.floor(Math.log(b)/Math.LN10),f=.25*Math.pow(10,g),h=2;else{g=Math.floor(Math.log(i)/Math.LN10);var k=i/Math.pow(10,g);f=2>=k?.25*Math.pow(10,g):6>=k?Math.pow(10,g):2*Math.pow(10,g),f=Math.ceil(f),h=Math.ceil(i/f)}a=b+f*h;var l=[];return this.populateLabels(c,l,h,b,f),{steps:h,stepValue:f,minValue:b,maxValue:a,labels:l}},c.populateLabels=function(a,b,c,d,f){for(var g=0;c+1>g;g++){var h=d+f*g;a&&(h=e(h,a)),b.push(h)}};var e=function(b,c){for(var d=c.trim().split("|"),e=b,f=0;f<d.length;f++){var g=d[f].trim().split(":"),h=a(g.shift().trim());g.unshift(e),e=h.apply(null,g)}return e},f=function(a,c,d){return b(c)&&a>c?c:b(d)&&d>a?d:a};c.animationLoop=function(a,b,c,e){function h(){var d=a.animation?f(k(l),null,0):1;m.clearRect(0,0,e.width,e.height),a.scaleOverlay?(c(d),b()):(b(),c(d))}function i(){l+=j,h(),1>=l?g(i):"function"==typeof a.onAnimationComplete&&a.onAnimationComplete()}var j=a.animation?1/f(a.animationSteps,Number.MAX_VALUE,1):1,k=d[a.animationEasing],l=a.animation?0:1,m=e.getContext("2d");"function"!=typeof b&&(b=function(){}),g(i)};var g=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();return c}]),angular.module("ng-charts").directive("barChart",["ng-charts.utils","ng-charts.defaults",function(a,b){"use strict";function c(c,f){var g=angular.extend(d,b),h=f[0];g=angular.extend(g,c.options),a.setCanvasSize(h,c.width,c.height),c.instance=new e(c.data,g,h,c.width,c.height)}var d={scaleLineColor:"rgba(0,0,0,.2)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.1)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1},e=function(b,c,d,e,f){function g(d){var e=b.datasets.length;j.lineWidth=c.barStrokeWidth;for(var f=0;e>f;f++)for(var g=b.datasets[f],h=0;h<g.y.length;h++){var i=m.orgin.x+c.barValueSpacing+m.gridSize.x*h+m.barWidth*f+c.barDatasetSpacing*f+c.barStrokeWidth*f,k=d*g.y[h]/(l.maxValue-l.minValue)*m.axisLength.y;j.fillStyle=g.fillColor||a.getColor(f,h,e),j.strokeStyle=g.strokeColor||a.getColor(f,h,e),j.beginPath(),j.moveTo(i,m.orgin.y),j.lineTo(i,m.orgin.y-k),j.lineTo(i+m.barWidth,m.orgin.y-k),j.lineTo(i+m.barWidth,m.orgin.y),c.barShowStroke&&j.stroke(),j.closePath(),j.fill()}}function h(){var a;for(j.lineWidth=c.scaleLineWidth,j.strokeStyle=c.scaleLineColor,j.beginPath(),j.moveTo(m.orgin.x,m.orgin.y),j.lineTo(m.orgin.x+m.axisLength.x,m.orgin.y),j.stroke(),m.rotateLabels>0?(j.save(),j.textAlign="right"):j.textAlign="center",j.fillStyle=c.scaleFontColor,a=0;a<b.labels.length;a++){j.save();var d=0;m.rotateLabels>0?(j.translate(m.orgin.x+a*m.gridSize.x,m.orgin.y+c.scaleFontSize),j.rotate(-(m.rotateLabels*(Math.PI/180))),90===m.rotateLabels&&(d=m.gridSize.x/2),j.fillText(b.labels[a],0,d),j.restore()):j.fillText(b.labels[a],m.orgin.x+a*m.gridSize.x+m.gridSize.x/2,m.orgin.y+c.scaleFontSize),j.beginPath(),j.moveTo(m.orgin.x+(a+1)*m.gridSize.x,m.orgin.y),j.lineWidth=c.scaleGridLineWidth,j.strokeStyle=c.scaleGridLineColor,j.lineTo(m.orgin.x+(a+1)*m.gridSize.x,5),j.stroke()}for(j.lineWidth=c.scaleLineWidth,j.strokeStyle=c.scaleLineColor,j.beginPath(),j.moveTo(m.orgin.x,m.orgin.y),j.lineTo(m.orgin.x,c.scaleFontSize/2),j.stroke(),j.textAlign="right",j.textBaseline="middle",a=0;a<l.labels.length;a++)j.beginPath(),j.moveTo(m.orgin.x-3,m.orgin.y-(a+1)*m.gridSize.y),c.scaleShowGridLines?(j.lineWidth=c.scaleGridLineWidth,j.strokeStyle=c.scaleGridLineColor,j.lineTo(m.orgin.x+m.axisLength.x,m.orgin.y-(a+1)*m.gridSize.y)):j.lineTo(m.orgin.x-.5,m.orgin.y-(a+1)*m.gridSize.y),j.stroke(),c.scaleShowLabels&&j.fillText(l.labels[a],m.orgin.x-8,m.orgin.y-a*m.gridSize.y)}function i(){j.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily;var a,d=f,g=0,h=0,i=0,k=b.datasets.length;if(c.scaleShowLabels){for(a=0;a<l.labels.length;a++){var m=j.measureText(l.labels[a]).width;h=m>h?m:h}h+=10}for(a=0;a<b.labels.length;a++){var n=j.measureText(b.labels[a]).width;i=n>i?n:i}e/b.labels.length<i?(g=45,e/b.labels.length<Math.cos(g)*i?(g=90,d-=i):d-=Math.sin(g)*i):d-=c.scaleFontSize,d-=c.scaleFontSize;var o=45==g?j.measureText(b.labels[0]).width:0,p=e-h-o,q=h+o,r=d+c.scaleFontSize/2,s=p/b.labels.length,t=Math.floor(d/l.steps),u=(s-2*c.scaleGridLineWidth-2*c.barValueSpacing-(c.barDatasetSpacing*k-1)-(c.barStrokeWidth/2*k-1))/k;return{orgin:{x:q,y:r},axisLength:{x:p,y:d},gridSize:{x:s,y:t},yLabelHeight:c.scaleFontSize,rotateLabels:g,barWidth:u}}var j=d.getContext("2d"),k=a.getValueBounds(b.datasets),l=a.calculateScale(k.maxY,k.minY,c.yFilters,c.zeroYAxis,c.yScaleLimits),m=i();a.animationLoop(c,h,g,d)};return{replace:!0,scope:{data:"=",options:"=?",width:"=",height:"="},template:"<canvas></canvas>",link:c}}]),angular.module("ng-charts").directive("hBarChart",["ng-charts.utils","ng-charts.defaults",function(a,b){"use strict";function c(c,f){var g=f[0],h=angular.extend(d,b);h=angular.extend(h,c.options),a.setCanvasSize(g,c.width,c.height),c.instance=new e(c.data,h,g,c.width,c.height)}var d={scaleLineColor:"rgba(0,0,0,.2)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.1)",scaleGridLineWidth:1,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1},e=function(b,c,d,e,f){function g(){var a;for(k.lineWidth=c.scaleLineWidth,k.strokeStyle=c.scaleLineColor,k.beginPath(),k.moveTo(n.orgin.x,n.orgin.y),k.lineTo(n.orgin.x,0),k.stroke(),k.textAlign="left",k.fillStyle=c.scaleFontColor,a=0;a<b.labels.length;a++)k.beginPath(),k.moveTo(n.orgin.x,n.orgin.y-(a+1)*n.gridSize.y),c.scaleShowGridLines?(k.lineWidth=c.scaleGridLineWidth,k.strokeStyle=c.scaleGridLineColor,k.lineTo(e,n.orgin.y-(a+1)*n.gridSize.y)):k.lineTo(n.orgin.x-2,n.orgin.y-(a+1)*n.gridSize.y),k.stroke(),k.fillText(b.labels[a],0,(a+.5)*n.gridSize.y);for(k.lineWidth=c.scaleLineWidth,k.strokeStyle=c.scaleLineColor,k.beginPath(),k.moveTo(n.orgin.x,n.orgin.y),k.lineTo(n.orgin.x+n.axisLength.x,n.orgin.y),k.stroke(),k.textAlign="center",k.textBaseline="middle",a=0;a<m.labels.length;a++)k.save(),c.scaleShowLabels&&k.fillText(m.labels[a],n.orgin.x+a*n.gridSize.x,n.orgin.y+c.scaleFontSize),k.beginPath(),k.moveTo(n.orgin.x+a*n.gridSize.x,n.orgin.y),k.lineWidth=c.scaleGridLineWidth,k.strokeStyle=c.scaleGridLineColor,k.lineTo(n.orgin.x+a*n.gridSize.x,0),k.stroke()}function h(d){k.lineWidth=c.barStrokeWidth;for(var e=0;j>e;e++)for(var f=b.datasets[e],g=0;g<f.y.length;g++){var h=g*n.gridSize.y+e*(n.barWidth+c.barStrokeWidth)+(e+1)*c.barDatasetSpacing+c.barValueSpacing,i=n.orgin.x+d*f.y[g]/(m.maxValue-m.minValue)*n.axisLength.x;k.fillStyle=b.datasets[e].fillColor||a.getColor(e,g,j),k.strokeStyle=b.datasets[e].strokeColor||a.getColor(e,g,j),k.beginPath(),k.moveTo(n.orgin.x,h),k.lineTo(i,h),k.lineTo(i,h+n.barWidth),k.lineTo(n.orgin.x,h+n.barWidth),c.barShowStroke&&k.stroke(),k.closePath(),k.fill()}}function i(){k.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily;var a,d=0,g=0,h=0,i=40;for(a=0;a<b.labels.length;a++)d=k.measureText(b.labels[a]).width,g=d>g?d:g;for(g+=10,a=0;a<m.labels.length;a++)d=k.measureText(m.labels[a]).width,h=d>h?d:h;var l=g/i*c.scaleFontSize,n=f-l-c.scaleFontSize,o=e-g-h/2,p=Math.max(h,g),q=f-l-c.scaleFontSize,r=o/(m.labels.length-1),s=n/b.labels.length,t=(s-c.barValueSpacing)/j-c.barDatasetSpacing-2*c.barStrokeWidth;return{orgin:{x:p,y:q},axisLength:{x:o,y:n},gridSize:{x:r,y:s},yLabelHeight:c.scaleFontSize,barWidth:t}}var j=b.datasets.length,k=d.getContext("2d"),l=a.getValueBounds(b.datasets),m=a.calculateScale(l.maxY,l.minY,c.yFilters,c.zeroYAxis,c.yScaleLimits),n=i();a.animationLoop(c,g,h,d)};return{replace:!0,scope:{data:"=",options:"=?",width:"=",height:"="},template:"<canvas></canvas>",link:c}}]),angular.module("ng-charts").directive("lineChart",["ng-charts.utils","ng-charts.defaults",function(a,b){"use strict";function c(c,f){var g=angular.extend(d,b),h=f[0];g=angular.extend(g,c.options),a.setCanvasSize(h,c.width,c.height),c.instance=new e(c.data,g,h,c.width,c.height)}var d={scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.1)",scaleGridLineFrequency:1,scaleGridLineWidth:1,bezierCurve:!0,pointDot:!0,pointDotRadius:6,pointDotStrokeWidth:1,datasetStroke:!0,datasetStrokeWidth:6,datasetFill:!1},e=function(b,c,d,e,f){function g(a){function d(b){return n.orgin.y-a*(b-l.minValue)/(l.maxValue-l.minValue)*n.axisLength.y}function f(a){return Math.max(n.orgin.x,n.orgin.x+(a-m.minValue)/(m.maxValue-m.minValue)*n.axisLength.x)}var g,h;for(g=0;g<b.datasets.length;g++){var i=b.datasets[g];for(j.strokeStyle=b.datasets[g].strokeColor,j.lineWidth=c.datasetStrokeWidth,j.beginPath(),j.moveTo(f(i.x[0]),d(i.y[0])),h=1;h<i.y.length;h++){var k=f(i.x[h]),o=d(i.y[h]);if(c.bezierCurve){var p=(k+f(i.x[h-1]))/2,q=d(i.y[h-1]);j.bezierCurveTo(p,q,p,o,k,o)}else j.lineTo(k,o)}if(j.stroke(),c.datasetFill?(j.lineTo(f(i.x[i.x.length-1]),n.orgin.y),j.lineTo(f(i.x[0]),n.orgin.y),j.closePath(),j.fillStyle=b.datasets[g].fillColor,j.fill()):j.closePath(),c.pointDot)for(j.fillStyle=b.datasets[g].pointColor,j.strokeStyle=b.datasets[g].pointStrokeColor,j.lineWidth=c.pointDotStrokeWidth,h=0;h<b.datasets[g].y.length;h++){var r=i.x[h],s=i.y[h];r>=m.minValue&&(j.beginPath(),j.arc(f(r),d(s),c.pointDotRadius,0,2*Math.PI,!0),j.fill(),j.stroke())}var t=n.orgin.x+(m.labels.length-1)*n.gridSize.x+.5*c.scaleLineWidth,u=n.orgin.y;j.clearRect(t,0,e,u)}}function h(){var a;for(j.lineWidth=c.scaleLineWidth,j.strokeStyle=c.scaleLineColor,j.beginPath(),j.moveTo(n.orgin.x,n.orgin.y),j.lineTo(n.orgin.x+n.axisLength.x,n.orgin.y),j.stroke(),n.rotateLabels>0?(j.save(),j.textAlign="right"):j.textAlign="center",j.fillStyle=c.scaleFontColor,a=0;a<m.labels.length;a++){j.save(),n.rotateLabels>0?(j.translate(n.orgin.x+a*n.gridSize.x,n.orgin.y+c.scaleFontSize),j.rotate(-(n.rotateLabels*(Math.PI/180))),j.fillText(m.labels[a],0,0),j.restore()):j.fillText(m.labels[a],n.orgin.x+a*n.gridSize.x,n.orgin.y+c.scaleFontSize+3),j.beginPath(),j.moveTo(n.orgin.x+a*n.gridSize.x,n.orgin.y+3);var b=Math.round(a/c.scaleGridLineFrequency)-a/c.scaleGridLineFrequency;c.scaleShowGridLines&&a>0&&0===b?(j.lineWidth=c.scaleGridLineWidth,j.strokeStyle=c.scaleGridLineColor,j.lineTo(n.orgin.x+a*n.gridSize.x,5)):j.lineTo(n.orgin.x+a*n.gridSize.x,n.orgin.y+3),j.stroke()}for(j.lineWidth=c.scaleLineWidth,j.strokeStyle=c.scaleLineColor,j.beginPath(),j.moveTo(n.orgin.x,n.orgin.y+5),j.lineTo(n.orgin.x,5),j.stroke(),j.textAlign="right",j.textBaseline="middle",a=0;a<l.steps+1;a++)j.beginPath(),j.moveTo(n.orgin.x,n.orgin.y-(a+1)*n.gridSize.y),c.scaleShowGridLines?(j.lineWidth=c.scaleGridLineWidth,j.strokeStyle=c.scaleGridLineColor,j.lineTo(n.orgin.x+n.axisLength.x+5,n.orgin.y-(a+1)*n.gridSize.y)):j.lineTo(n.orgin.x-.5,n.orgin.y-(a+1)*n.gridSize.y),j.stroke(),c.scaleShowLabels&&j.fillText(l.labels[a],n.orgin.x-8,n.orgin.y-a*n.gridSize.y)}function i(){j.font=c.scaleFontStyle+" "+c.scaleFontSize+"px "+c.scaleFontFamily;var a,b=f,d=0,g=0,h=0,i=0;for(a=0;a<m.labels.length;a++){var k=j.measureText(m.labels[a]).width;h=k>h?k:h,0===a&&(i=k)}if(e/m.labels.length<h?(d=45,e/m.labels.length<Math.cos(d)*h?(d=90,b-=h,i=c.scaleFontSize):b-=Math.sin(d)*h):(b-=c.scaleFontSize,i/=2),b-=c.scaleFontSize+5,c.scaleShowLabels){for(a=0;a<l.labels.length;a++){var n=j.measureText(l.labels[a]).width;g=n>g?n:g}g+=10}var o=e-g-h,p=Math.max(i,g),q=b+c.scaleFontSize/2,r=Math.floor(o/(m.labels.length-1)),s=Math.floor(b/l.steps);return{orgin:{x:p,y:q},axisLength:{x:o,y:b},gridSize:{x:r,y:s},yLabelHeight:c.scaleFontSize,rotateLabels:d}}var j=d.getContext("2d"),k=a.getValueBounds(b.datasets),l=a.calculateScale(k.maxY,k.minY,c.yFilters,c.zeroYAxis,c.yScaleLimits),m=a.calculateScale(k.maxX,k.minX,c.xFilters,c.zeroXAxis,c.xScaleLimits),n=i();a.animationLoop(c,h,g,d)};return{replace:!0,scope:{data:"=",options:"=?",width:"=",height:"="},template:"<canvas></canvas>",link:c}}]),angular.module("ng-charts").directive("pieChart",["ng-charts.utils","ng-charts.defaults",function(a,b){"use strict";function c(c,f){var g=angular.extend(d,b),h=f[0];c.options&&(g=angular.extend(g,c.options)),a.setCanvasSize(h,c.width,c.height),c.instance=new e(c.data,g,h,c.width,c.height)}var d={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animateRotate:!0,animateScale:!1,legend:!0,innerCutout:0},e=function(b,c,d,e,f){function g(d){var e=-Math.PI/2,f=1,g=1;c.animation&&(c.animateScale&&(f=d),c.animateRotate&&(g=d));for(var h=0;h<j.length;h++){var m=g*(j[h]/l)*2*Math.PI;i.beginPath(),i.arc(k.center.x,k.center.y,f*k.radius,e,e+m,!1),i.arc(k.center.x,k.center.y,f*k.innerRadius,e+m,e,!0),i.closePath(),i.fillStyle=a.getColor(0,h,1),i.fill(),c.segmentShowStroke&&(i.lineWidth=c.segmentStrokeWidth,i.strokeStyle=c.segmentStrokeColor,i.stroke()),e+=m,c.legend&&(i.fillRect(k.legendX,k.legendY+2*h*k.legendTitleSize,k.legendTitleSize,k.legendTitleSize),i.fillStyle="#000",i.textBaseline="middle",i.fillText(b.labels[h],k.legendX+k.legendTitleSize+10,k.legendY+(2*h+.5)*k.legendTitleSize))}}function h(){var a={};return c.legend?(a.legendWidth=200,a.radius=Math.min(f/2,(e-a.legendWidth)/2)-5,a.center={x:(e-a.legendWidth)/2,y:f/2},a.legendTitleSize=25,a.legendY=f/2-b.datasets[0].y.length*a.legendTitleSize,a.legendX=e-a.legendWidth+20):(a.radius=Math.min(f/2,e/2)-5,a.center={x:e/2,y:f/2}),a.innerRadius=a.radius*(c.innerCutout/100),a}for(var i=d.getContext("2d"),j=b.datasets[0].y,k=h(),l=0,m=0;m<j.length;m++)l+=j[m];a.animationLoop(c,null,g,d)};return{replace:!0,scope:{data:"=",options:"=?",width:"=",height:"="},template:"<canvas></canvas>",link:c}}]);